# Calculating ADHD prevalence rate from EMIS and Cegedim records using open-source data from NHS England

The following code generates the prevalence rate from [NHS Englandâ€™s Health and Care of People with Learning Disabilities publication series]( https://digital.nhs.uk/data-and-information/publications/statistical/health-and-care-of-people-with-learning-disabilities) The data comes from EMIS and Cegedim.

## Method

### Getting Data
The raw data is downloaded through the following links:
* [For 2016 to 2017](https://files.digital.nhs.uk/49/70A43E/health_care_ld_ccg_data_1617_2021.zip)
* [For 2017 to 2022](https://files.digital.nhs.uk/BC/016738/health_care_ld_sicbl_data_1718_2122.zip)
* [For 2022 to 2023](https://files.digital.nhs.uk/43/BD15AC/health_care_ld_sicbl_2022-23.csv)
* [For 2023 to 2024](https://files.digital.nhs.uk/FC/187D35/health_care_ld_sicbl_2023-24.csv)

The [CCG and SICBL](https://www.nhsbsa.nhs.uk/sicbls-icbs-and-other-providers/organisation-and-prescriber-changes/sub-icb-locations) corresponds to different geographic arrangement of NHS services. The data were taken at different times thus there may be small differences between counts in CCG and SICL. We will only use CCG data for 2016 to 2017 as the SICBL is not available, maintaining data quality where possible.

### Data Munging
All the downloaded table are concatenated, and meta data are harmonised with the outputs from OpenSAFELY.

### Prevalence Calculations
We calculate ADHD prevalence for each year by computing the numerator and denominator as the number patients with ADHD with the indicator `['LDOB089','LDOB091']` and the total sample with the indicator `['LDOB003A' , 'LDOB003B']`. The prevalence are grouped by age, sex and year.


## Table 
[place_table_here]: #

| interval_start   | interval_end   |       ratio |   numerator |   denominator | sex    | age_band    |
|:-----------------|:---------------|------------:|------------:|--------------:|:-------|:------------|
| 2023-04-01       | 2024-03-31     | 0.00320342  |        5845 |       1824615 | female | 0 to 9      |
| 2023-04-01       | 2024-03-31     | 0.018973    |       31560 |       1663420 | female | 10 to 17    |
| 2023-04-01       | 2024-03-31     | 0.022808    |       34620 |       1517890 | female | 18 to 24    |
| 2023-04-01       | 2024-03-31     | 0.0165178   |       43650 |       2642605 | female | 25 to 34    |
| 2023-04-01       | 2024-03-31     | 0.0092484   |       23415 |       2531790 | female | 35 to 44    |
| 2023-04-01       | 2024-03-31     | 0.00520493  |       10995 |       2112420 | female | 45 to 54    |
| 2023-04-01       | 2024-03-31     | 0.00205202  |        4085 |       1990720 | female | 55 to 64    |
| 2023-04-01       | 2024-03-31     | 0.000733802 |        1045 |       1424090 | female | 65 to 74    |
| 2023-04-01       | 2024-03-31     | 0.000312235 |         475 |       1521290 | female | 75 and over |
| 2023-04-01       | 2024-03-31     | 0.0091562   |       17555 |       1917280 | male   | 0 to 9      |
| 2023-04-01       | 2024-03-31     | 0.0486443   |       84965 |       1746660 | male   | 10 to 17    |
| 2023-04-01       | 2024-03-31     | 0.0398677   |       59235 |       1485790 | male   | 18 to 24    |
| 2023-04-01       | 2024-03-31     | 0.0262691   |       70220 |       2673100 | male   | 25 to 34    |
| 2023-04-01       | 2024-03-31     | 0.0111825   |       29990 |       2681860 | male   | 35 to 44    |
| 2023-04-01       | 2024-03-31     | 0.00489358  |       11085 |       2265215 | male   | 45 to 54    |
| 2023-04-01       | 2024-03-31     | 0.00212792  |        4355 |       2046600 | male   | 55 to 64    |
| 2023-04-01       | 2024-03-31     | 0.000853249 |        1150 |       1347790 | male   | 65 to 74    |
| 2023-04-01       | 2024-03-31     | 0.000384248 |         450 |       1171120 | male   | 75 and over |
| 2022-04-01       | 2023-03-31     | 0.00256811  |        4760 |       1853500 | female | 0 to 9      |
| 2022-04-01       | 2023-03-31     | 0.0150741   |       24840 |       1647865 | female | 10 to 17    |
| 2022-04-01       | 2023-03-31     | 0.0180881   |       27520 |       1521445 | female | 18 to 24    |
| 2022-04-01       | 2023-03-31     | 0.0119892   |       31370 |       2616515 | female | 25 to 34    |
| 2022-04-01       | 2023-03-31     | 0.00620597  |       15425 |       2485510 | female | 35 to 44    |
| 2022-04-01       | 2023-03-31     | 0.00345286  |        7355 |       2130120 | female | 45 to 54    |
| 2022-04-01       | 2023-03-31     | 0.0014177   |        2800 |       1975035 | female | 55 to 64    |
| 2022-04-01       | 2023-03-31     | 0.000616398 |         880 |       1427650 | female | 65 to 74    |
| 2022-04-01       | 2023-03-31     | 0.000313624 |         470 |       1498610 | female | 75 and over |
| 2022-04-01       | 2023-03-31     | 0.00795536  |       15490 |       1947115 | male   | 0 to 9      |
| 2022-04-01       | 2023-03-31     | 0.0433368   |       75030 |       1731325 | male   | 10 to 17    |
| 2022-04-01       | 2023-03-31     | 0.0359863   |       53370 |       1483065 | male   | 18 to 24    |
| 2022-04-01       | 2023-03-31     | 0.0231576   |       61370 |       2650100 | male   | 25 to 34    |
| 2022-04-01       | 2023-03-31     | 0.0085326   |       22495 |       2636360 | male   | 35 to 44    |
| 2022-04-01       | 2023-03-31     | 0.00371119  |        8460 |       2279595 | male   | 45 to 54    |
| 2022-04-01       | 2023-03-31     | 0.00164673  |        3345 |       2031295 | male   | 55 to 64    |
| 2022-04-01       | 2023-03-31     | 0.000794175 |        1070 |       1347310 | male   | 65 to 74    |
| 2022-04-01       | 2023-03-31     | 0.000391717 |         450 |       1148790 | male   | 75 and over |
| 2021-04-01       | 2022-03-31     | 0.00206777  |        3907 |       1889474 | female | 0 to 9      |
| 2021-04-01       | 2022-03-31     | 0.0121446   |       19739 |       1625335 | female | 10 to 17    |
| 2021-04-01       | 2022-03-31     | 0.0131214   |       19927 |       1518659 | female | 18 to 24    |
| 2021-04-01       | 2022-03-31     | 0.0078026   |       20351 |       2608234 | female | 25 to 34    |
| 2021-04-01       | 2022-03-31     | 0.00371967  |        9054 |       2434088 | female | 35 to 44    |
| 2021-04-01       | 2022-03-31     | 0.00213331  |        4614 |       2162835 | female | 45 to 54    |
| 2021-04-01       | 2022-03-31     | 0.000940762 |        1841 |       1956924 | female | 55 to 64    |
| 2021-04-01       | 2022-03-31     | 0.000397481 |         574 |       1444094 | female | 65 to 74    |
| 2021-04-01       | 2022-03-31     | 0.00021683  |         319 |       1471201 | female | 75 and over |
| 2021-04-01       | 2022-03-31     | 0.00708733  |       14061 |       1983964 | male   | 0 to 9      |
| 2021-04-01       | 2022-03-31     | 0.0395008   |       67439 |       1707280 | male   | 10 to 17    |
| 2021-04-01       | 2022-03-31     | 0.0325258   |       48036 |       1476859 | male   | 18 to 24    |
| 2021-04-01       | 2022-03-31     | 0.0203391   |       53514 |       2631085 | male   | 25 to 34    |
| 2021-04-01       | 2022-03-31     | 0.00637059  |       16456 |       2583121 | male   | 35 to 44    |
| 2021-04-01       | 2022-03-31     | 0.00273885  |        6333 |       2312282 | male   | 45 to 54    |
| 2021-04-01       | 2022-03-31     | 0.00123134  |        2484 |       2017321 | male   | 55 to 64    |
| 2021-04-01       | 2022-03-31     | 0.000509829 |         694 |       1361241 | male   | 65 to 74    |
| 2021-04-01       | 2022-03-31     | 0.00023776  |         266 |       1118773 | male   | 75 and over |
| 2020-04-01       | 2021-03-31     | 0.00188881  |        3632 |       1922903 | female | 0 to 9      |
| 2020-04-01       | 2021-03-31     | 0.0101938   |       16248 |       1593908 | female | 10 to 17    |
| 2020-04-01       | 2021-03-31     | 0.00959736  |       14470 |       1507707 | female | 18 to 24    |
| 2020-04-01       | 2021-03-31     | 0.00548809  |       14232 |       2593254 | female | 25 to 34    |
| 2020-04-01       | 2021-03-31     | 0.00250593  |        5979 |       2385938 | female | 35 to 44    |
| 2020-04-01       | 2021-03-31     | 0.00154211  |        3370 |       2185316 | female | 45 to 54    |
| 2020-04-01       | 2021-03-31     | 0.000735111 |        1415 |       1924879 | female | 55 to 64    |
| 2020-04-01       | 2021-03-31     | 0.000332908 |         490 |       1471879 | female | 65 to 74    |
| 2020-04-01       | 2021-03-31     | 0.000213292 |         304 |       1425277 | female | 75 and over |
| 2020-04-01       | 2021-03-31     | 0.00670749  |       13553 |       2020577 | male   | 0 to 9      |
| 2020-04-01       | 2021-03-31     | 0.0366329   |       61199 |       1670603 | male   | 10 to 17    |
| 2020-04-01       | 2021-03-31     | 0.0305459   |       44218 |       1447591 | male   | 18 to 24    |
| 2020-04-01       | 2021-03-31     | 0.0182084   |       46843 |       2572603 | male   | 25 to 34    |
| 2020-04-01       | 2021-03-31     | 0.0049904   |       12578 |       2520437 | male   | 35 to 44    |
| 2020-04-01       | 2021-03-31     | 0.00218159  |        5092 |       2334073 | male   | 45 to 54    |
| 2020-04-01       | 2021-03-31     | 0.00102196  |        2034 |       1990294 | male   | 55 to 64    |
| 2020-04-01       | 2021-03-31     | 0.00044972  |         624 |       1387529 | male   | 65 to 74    |
| 2020-04-01       | 2021-03-31     | 0.000228031 |         245 |       1074417 | male   | 75 and over |
| 2019-04-01       | 2020-03-31     | 0.00184662  |        3662 |       1983086 | female | 0 to 9      |
| 2019-04-01       | 2020-03-31     | 0.00916194  |       14394 |       1571064 | female | 10 to 17    |
| 2019-04-01       | 2020-03-31     | 0.00775353  |       12113 |       1562256 | female | 18 to 24    |
| 2019-04-01       | 2020-03-31     | 0.00437965  |       11529 |       2632402 | female | 25 to 34    |
| 2019-04-01       | 2020-03-31     | 0.0018873   |        4464 |       2365281 | female | 35 to 44    |
| 2019-04-01       | 2020-03-31     | 0.00120251  |        2675 |       2224507 | female | 45 to 54    |
| 2019-04-01       | 2020-03-31     | 0.000626431 |        1187 |       1894863 | female | 55 to 64    |
| 2019-04-01       | 2020-03-31     | 0.000287678 |         427 |       1484300 | female | 65 to 74    |
| 2019-04-01       | 2020-03-31     | 0.000229713 |         332 |       1445284 | female | 75 and over |
| 2019-04-01       | 2020-03-31     | 0.006983    |       14562 |       2085349 | male   | 0 to 9      |
| 2019-04-01       | 2020-03-31     | 0.0344675   |       56731 |       1645928 | male   | 10 to 17    |
| 2019-04-01       | 2020-03-31     | 0.0286801   |       42423 |       1479179 | male   | 18 to 24    |
| 2019-04-01       | 2020-03-31     | 0.0163579   |       42249 |       2582786 | male   | 25 to 34    |
| 2019-04-01       | 2020-03-31     | 0.00397878  |        9899 |       2487948 | male   | 35 to 44    |
| 2019-04-01       | 2020-03-31     | 0.00184871  |        4367 |       2362194 | male   | 45 to 54    |
| 2019-04-01       | 2020-03-31     | 0.000873066 |        1707 |       1955179 | male   | 55 to 64    |
| 2019-04-01       | 2020-03-31     | 0.000414722 |         580 |       1398527 | male   | 65 to 74    |
| 2019-04-01       | 2020-03-31     | 0.000226077 |         246 |       1088123 | male   | 75 and over |
| 2018-04-01       | 2019-03-31     | 0.00168872  |        3360 |       1989674 | female | 0 to 9      |
| 2018-04-01       | 2019-03-31     | 0.00824174  |       12458 |       1511574 | female | 10 to 17    |
| 2018-04-01       | 2019-03-31     | 0.00700036  |       10836 |       1547920 | female | 18 to 24    |
| 2018-04-01       | 2019-03-31     | 0.00367047  |        9509 |       2590677 | female | 25 to 34    |
| 2018-04-01       | 2019-03-31     | 0.00154105  |        3543 |       2299086 | female | 35 to 44    |
| 2018-04-01       | 2019-03-31     | 0.000991666 |        2196 |       2214455 | female | 45 to 54    |
| 2018-04-01       | 2019-03-31     | 0.000547969 |         998 |       1821272 | female | 55 to 64    |
| 2018-04-01       | 2019-03-31     | 0.000283655 |         416 |       1466571 | female | 65 to 74    |
| 2018-04-01       | 2019-03-31     | 0.000238288 |         338 |       1418454 | female | 75 and over |
| 2018-04-01       | 2019-03-31     | 0.00653358  |       13662 |       2091042 | male   | 0 to 9      |
| 2018-04-01       | 2019-03-31     | 0.0322159   |       50963 |       1581922 | male   | 10 to 17    |
| 2018-04-01       | 2019-03-31     | 0.0275591   |       40255 |       1460680 | male   | 18 to 24    |
| 2018-04-01       | 2019-03-31     | 0.0145581   |       36907 |       2535146 | male   | 25 to 34    |
| 2018-04-01       | 2019-03-31     | 0.00318881  |        7711 |       2418145 | male   | 35 to 44    |
| 2018-04-01       | 2019-03-31     | 0.00157729  |        3704 |       2348339 | male   | 45 to 54    |
| 2018-04-01       | 2019-03-31     | 0.00075718  |        1420 |       1875380 | male   | 55 to 64    |
| 2018-04-01       | 2019-03-31     | 0.000375691 |         519 |       1381455 | male   | 65 to 74    |
| 2018-04-01       | 2019-03-31     | 0.000248274 |         263 |       1059315 | male   | 75 and over |
| 2017-04-01       | 2018-03-31     | 0.00155685  |        3112 |       1998908 | female | 0 to 9      |
| 2017-04-01       | 2018-03-31     | 0.00749234  |       10991 |       1466964 | female | 10 to 17    |
| 2017-04-01       | 2018-03-31     | 0.00627332  |        9671 |       1541608 | female | 18 to 24    |
| 2017-04-01       | 2018-03-31     | 0.00305236  |        7844 |       2569819 | female | 25 to 34    |
| 2017-04-01       | 2018-03-31     | 0.00127046  |        2869 |       2258241 | female | 35 to 44    |
| 2017-04-01       | 2018-03-31     | 0.000832673 |        1846 |       2216958 | female | 45 to 54    |
| 2017-04-01       | 2018-03-31     | 0.000484741 |         857 |       1767956 | female | 55 to 64    |
| 2017-04-01       | 2018-03-31     | 0.000279452 |         406 |       1452842 | female | 65 to 74    |
| 2017-04-01       | 2018-03-31     | 0.000252833 |         354 |       1400133 | female | 75 and over |
| 2017-04-01       | 2018-03-31     | 0.00610478  |       12815 |       2099174 | male   | 0 to 9      |
| 2017-04-01       | 2018-03-31     | 0.0301786   |       46324 |       1534997 | male   | 10 to 17    |
| 2017-04-01       | 2018-03-31     | 0.026736    |       38839 |       1452688 | male   | 18 to 24    |
| 2017-04-01       | 2018-03-31     | 0.0127253   |       31777 |       2497153 | male   | 25 to 34    |
| 2017-04-01       | 2018-03-31     | 0.00258887  |        6138 |       2370920 | male   | 35 to 44    |
| 2017-04-01       | 2018-03-31     | 0.00133099  |        3121 |       2344879 | male   | 45 to 54    |
| 2017-04-01       | 2018-03-31     | 0.000662987 |        1204 |       1816023 | male   | 55 to 64    |
| 2017-04-01       | 2018-03-31     | 0.000348973 |         478 |       1369733 | male   | 65 to 74    |
| 2017-04-01       | 2018-03-31     | 0.000274273 |         284 |       1035465 | male   | 75 and over |
| 2016-04-01       | 2017-03-31     | 0.00149764  |        2987 |       1994469 | female | 0 to 9      |
| 2016-04-01       | 2017-03-31     | 0.00680414  |        9689 |       1423986 | female | 10 to 17    |
| 2016-04-01       | 2017-03-31     | 0.00574774  |        8783 |       1528079 | female | 18 to 24    |
| 2016-04-01       | 2017-03-31     | 0.00253981  |        6429 |       2531292 | female | 25 to 34    |
| 2016-04-01       | 2017-03-31     | 0.00106998  |        2375 |       2219661 | female | 35 to 44    |
| 2016-04-01       | 2017-03-31     | 0.000723062 |        1593 |       2203132 | female | 45 to 54    |
| 2016-04-01       | 2017-03-31     | 0.000469054 |         803 |       1711958 | female | 55 to 64    |
| 2016-04-01       | 2017-03-31     | 0.000272801 |         392 |       1436946 | female | 65 to 74    |
| 2016-04-01       | 2017-03-31     | 0.000268594 |         374 |       1392437 | female | 75 and over |
| 2016-04-01       | 2017-03-31     | 0.00572484  |       11990 |       2094382 | male   | 0 to 9      |
| 2016-04-01       | 2017-03-31     | 0.0282992   |       42150 |       1489440 | male   | 10 to 17    |
| 2016-04-01       | 2017-03-31     | 0.0256976   |       36996 |       1439666 | male   | 18 to 24    |
| 2016-04-01       | 2017-03-31     | 0.0110088   |       26922 |       2445494 | male   | 25 to 34    |
| 2016-04-01       | 2017-03-31     | 0.00214638  |        4996 |       2327638 | male   | 35 to 44    |
| 2016-04-01       | 2017-03-31     | 0.00115133  |        2676 |       2324278 | male   | 45 to 54    |
| 2016-04-01       | 2017-03-31     | 0.000595459 |        1044 |       1753270 | male   | 55 to 64    |
| 2016-04-01       | 2017-03-31     | 0.000363579 |         492 |       1353213 | male   | 65 to 74    |
| 2016-04-01       | 2017-03-31     | 0.000279649 |         285 |       1019135 | male   | 75 and over |